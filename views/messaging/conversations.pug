extends ../layout

block content
  link(rel='stylesheet', href='/stylesheets/conversations.css')
  .messaging
    .inbox_msg
      .inbox_people
        .headind_srch
          .recent_heading
            h4 Recent
          .srch_bar
            .stylish-input-group
              input.search-bar(type='text', placeholder='Search')
              span.input-group-addon
                button(type='button')
                  i.fa.fa-search
        .inbox_chat
          if conversations.length
            each conversation in conversations
              .chat_list(class=currentConversation && currentConversation._id.toString()===conversation._id.toString()? 'active_chat':'')
                .chat_people
                  .chat_img
                    img(src="https://ptetutorials.com/images/user-profile.png" alt="sunil")
                  .chat_ib
                    h5 
                      a(href='/m/'+conversation._id) Sender
                      span.chat_date= dateFnsFormat(conversation.createdAt,'MMM d, h:m aa')
                    p #{conversation.title}
          else
            p No Active Conversations
            a(href='') Sim One Now
      .mesgs
        .msg_history
          .incoming_msg
            if messages && messages.length
              each message in messages
                if message.owner.refModel === 'Member' && message.owner.modelRef.account.toString() === req.user._id.toString()
                  .outgoing_msg
                    .sent_msg
                      p !{message.body}
                      span.time_date= dateFnsFormat(message.createdAt, 'h:m aa | MMM d')
                else
                  .incoming_msg_img
                    img(src="https://ptetutorials.com/images/user-profile.png" alt="sunil")

                  .received_msg
                    .received_withd_msg
                      p !{message.body}
                      span.time_date= dateFnsFormat(message.createdAt, 'h:m aa | MMM d')

            else
              p There are no messages yet  

        .type_msg
          .input_msg_write
            input.write_msg(type='text', placeholder="Type a message")
            button.msg_send_btn(type='button')
              i.fa.fa-paper-plane
  

block scripts
  script.
    var name;
    // load components
    // implement components apis
